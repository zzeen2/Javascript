# git 브런치 rebase

> 브런치 가지
> 코드의 독립적인 작업의 내용을 만들때 사용한다.
> 나무가지 처럼 갈라지는 작업의 내용
> 작업을하다가 버그 이슈나 핫픽스 내용을 브런치로 관리하거나 팀원간의 독립된 코드의 내용을 브런치로 관리

## 브런치
> 안정적인 코드를 유지하기 위해서 사용한다.
> 새로운 기능 추가에 대한 개발을 하기위해서 사용
> 버그 수정을 위해서 사용
> 브런치에서 작업한 내용을 메인 브런치에 올리기전에 팀장의 브런치에 병합을 한뒤 메인 브런치에 병합
> 버전 관리는 메인 브런치에서 하고 1ver 2ver
> 1 팀원(soon) 2 팀원(juu) 3 팀원(lee) 4 팀원(kim) 

> 2 팀원 (juu) +(병합) 1 팀원 (soon)
> 2 팀원 (juu) +(병합) 3 팀원 (lee)
> 2 팀원 (juu) +(병합) 4 팀원 (kim)
> 마지막으로 master 브런치에 팀장의 브런치를 merge(병합)

## git 저장소 초기화
```sh
git init # .git 로컬 깃 저장소 초기화
echo "123" > README.md # 파일 생성
git add . # 모든 변경내용 스테이징

git restore 파일명 # 내용을 이전으로 돌린다.
git restore --staged . # 모든 스테이징 내용을 내린다.
git restore --staged 파일명 # 해당 파일을 스테이징에서 내린다.

git commit -m "[feat] 파일 추가"
```

# 브런치 생성
```sh
head는 최신 작업 위치해 있다.
head는 위치를 이동할수 있다 checkout switch 명령어로 이동
master 브런치의 위치에 있는것.

# git 브런치 없는 커밋 주의
# 이력이 있는 상태에서 
# 1번 이력 2번이력
# 2이력이 최신 내용이라서 head가 2번 이력 즉 master 브런치에 위치해있고
# 1번 이력 커밋 해시로 head를 이동시킨후 변경을 추가하고 커밋을 하게되면
# 브런치에서 떨어진 커밋이 생성된다 커밋을 만든 이후에 head를 이동시키면 브런치가 없는 커밋은 사라진다.

# 브런치 생성
git branch 생성할 브런치 이름

# 브런치 목록 확인
git branch

# 로컬 저장소 브런치와 원격 저장소 브런치도 확인
git branch -a 

# 기본 설정 브런치는 버전관리 프로젝트의 완벽한 내용을 병합해서 관리한다.

## 브런치의 이동
git checkout 브런치 이름
git checkout 커밋 해시

### checkout switch restore
checkout 명령어 다른 기능들 중에 파일의 내용을 되돌린다. 다른 기능 2.23버전전에 사용했던 명령어

switch 명령어는 단순하게 이동만 목적만 2.23 버전 이후에 사용되는 명령어 목적에 맞게
restore 파일의 내용을 되돌리는 목적

git switch 이동할 브런치 이름

# 브런치 삭제
# 작업이 끝나고 브런치를 제거해야한다.
git branch -d 삭제할 브런치 이름 # 브런치에 병합을 한 브런치만 삭제할수 있다.
git branch -D 삭제할 브런치 이름 # 강제 삭제 병합을 안한 브런치도 삭제할수 있다.

# 브런치 병합
# 병합이되는 브런치의 위치로 head를 이동시킨 후에 merge로 병합을 시킬 브런치의 이름을 작성해서 내용을 가져온다
# 내가 dev 브런치에 hotfix브런치의 내용을 병합 시키겠다.
git switch dev # dev브런치로 이동 왜냐? dev브런치에 내용을 병합할거니까
git merge hotfix # head가 있는 브런치 dev의 브런치에 hotfix 브런치의 내용을 병합한다. 병합한 커밋 내용을 작성하면서 병합한다.

### 충돌 내용 발생!!!
## 첫번째 버튼은 현재 브런치의 내용을 유지 (즉 위의 내용)
## 두번째 버튼은 가져온 브런치의 내용을 유지 (즉 밑의 내용)
## 세번째 버튼은 현재 브런치의 내용과 가져온 브런치의 내용 모두를 유지
<<<<<<< HEAD
852464
=======
789
>>>>>>> hotfix


git merge 브런치 이름

# 브런치의 이름 수정
git branch -m 이전 브런치의 이름 새로운 브런치의 이름
git branch -m <이전 브런치 이름> <새로운 브런치의 이름>
```

### 코드의 병합 방법이 3가지
- merge : 병합 내용을 이력에 남긴다. 브런치의 병합내용
- pull : 원격저장소의 내용을 로컬 저장소에 가져와서 병합
- rebase : 커밋을 병합하고 하나의 커밋을 브런치의 위로 위치시킨다.

# rebase
> 좀 주의해서 사용을 하는것을 추천
> rebase는 브런치의 커밋 이력을 수정하거나 삭제 등의 정리를 하는 목적 기존의 커밋내용을 새로운 브런치의 위로 위치시키는 것.
```sh
git rebase -i 브런치 혹은 커밋 해시
# 인터렉티브 모드에 접근 커밋을 수정, 삭제, 합치기 등등 작업을 할수 있다.

git rebase 브런치

# 실습
git rebase hotfix

# 충돌 발생해서 해결하고 rebase 그대로 다시 진행
git rebase --contiune

# 커밋 수정
git rebase -i 커밋 해시

vim 모드에 접속되면 명령어

pick d480111 dev 작업 

이런 내용을 vim 모드에서 확인할수 있고

명령어
1. pick : 커밋을 그대로 유지
2. reword : 커밋 메시지를 수정
3. edit : 커밋의 내용을 수정
4. squash : 이전 커밋내용과 합치기
5. fixup : 이전 커밋 내용과 합치는데 메시지를 유지하지는 않는다.
6. drop : 커밋 내용 삭제

## git push -u origin 브런치
> -u  --set-upstream 옵션은 로컬 브런치와 원격브런치를 동기화해서 이후에 git push 이랑 git pull을 할때 자동으로 원격 브런치를 추적한다.

## 원격 저장소 모든 내용 추가(강제로)
git push --force --all ## 팀원들과 잘 소통하고 커밋을 삭제할거면 팀원들의 브런치의 내용도 한번 모두 pull 받고

## 조금 안전하게 하는법
git push --force-with-lease ## 강제로 푸쉬는 맞는데 안전하게 원격저장소의 형태를 확인하고 충돌 방지로 안전하게 업로드

## 원격 저장소 내용이 충돌나서 아무리해도 복구할수가 없다 예기치 못한 문제가 발생
## 내 로컬에 있는 내용이 정답이야 
git push --force

# 로컬 저장소에서는 지웠는데 원격 저장소에 내용이 남아있어서 깃 그래프 이력에 origin 저장소의 이력이 보이는것.
# 원격 저장소에 삭제내용을 push해줘야한다.
git push --force --all # 모든 수정내용을 강제로 푸쉬

```

## git stash
```sh
브런치의 내용을 수정하다가 hotfix 브런치를 생성하고 즉 다른 브런치를 생성하고 잠시 다른브런치로 이동해서 작업을 해야하는 경우 

브런치에서 작업하던 내용을 잠시 저장했다가 다른 브런치에서 작업이 끝나면 해당 브런치로 돌아와서 이어서 작업 진행 가능

git stash # 메모리상에 작업내용 저장 index로 저장
git stash pop # 마지막 작업내용 다시 메모리에서 가져오기
```

## pr 